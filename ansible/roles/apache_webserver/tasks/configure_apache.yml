---
- name: main.yml | configure journald
  block:
  - name: Install Apache
    yum:
      name: httpd
      state: present

  - name: Create directory structure
    ansible.builtin.file:
      path: "/opt/html"
      state: directory
      owner: root
      group: root
      mode: 0755
          
  - name: Copy httpd.conf
    template:
      src: httpd.conf.j2
      dest: /etc/httpd/conf/httpd.conf
      owner: root
      group: root
      mode: 0644
    notify:
      - restart httpd

  - name: Copy index.html
    template:
      src: index.html.j2
      dest: /opt/html/index.html
      owner: root
      group: root
      mode: 0644
    notify:
      - restart httpd

  - name: Start and enable Apache
    service:
      name: httpd
      state: started
      enabled: true
